# Architecture Decision Records (ADR) 運用ルール

## ADR作成タイミング

### 必須作成ケース

- [ ] 新しいアーキテクチャパターンの導入
- [ ] フレームワーク・ライブラリの追加・変更
- [ ] データベーススキーマの大幅な変更
- [ ] API設計・仕様の重要な変更
- [ ] セキュリティアーキテクチャの変更
- [ ] 重要なパフォーマンス最適化の実施

### 推奨作成ケース

- [ ] 複雑なビジネスロジックの実装方針決定
- [ ] UI/UXパターンの標準化決定
- [ ] インフラ・デプロイ方式の変更
- [ ] テスト戦略の大幅な変更

## ADR作成フロー

1. **作成タイミング**: 実装完了・コミット前
2. **ファイル名**: `YYYYMMDD-adr-[連番]-[タイトル].md`
3. **配置場所**: `docs/adr/`ディレクトリ
4. **テンプレート使用**: `docs/adr/template.md`を使用

## ADR記録内容

### 必須項目

- **Status**: 採用済み/検討中/廃止予定など
- **Context**: 決定に至った背景・課題
- **Decision**: 採用した解決策・アーキテクチャ
- **Consequences**: 影響・トレードオフ

### 推奨項目

- **Alternatives**: 検討した他の選択肢
- **Related**: 関連するADR・ドキュメント
- **Implementation**: 実装詳細・制約事項

## ClaudeCode実装時のADR作成義務

- **重要な設計決定を行った場合**: 必ずADRを作成すること
- **既存アーキテクチャを変更した場合**: 変更理由・影響をADRに記録すること
- **新しい技術・パターンを導入した場合**: 選定理由・運用方針をADRに記録すること

## プロダクトオーナー意思決定のADR記録ルール

### 必須実施項目

- **プロダクトオーナーが意思決定を伝えた場合**: 必ずADRとして記録すること
- **方向性・設計思想の変更**: 既存実装の方向転換時は理由と影響をADRに記録
- **機能スコープの制限・拡張**: 機能境界の決定時は判断基準をADRに残す
- **ユーザー体験に関する方針**: UX設計の重要な判断はADRで文書化

### プロダクトオーナー意思決定のADR記録タイミング

1. プロダクトオーナーからの指示・フィードバック受領時
2. 実装方向の修正・変更指示時
3. 機能要件の明確化・制限指示時
4. ユーザビリティ・体験設計の方針決定時

### プロダクトオーナー意思決定のADR記録内容

- **Context**: 意思決定に至った背景・課題
- **Decision**: プロダクトオーナーが決定した方針・方向性
- **Rationale**: 判断理由・考慮要素
- **Impact**: 既存実装・今後の開発への影響
- **Implementation**: 変更に必要な具体的な実装内容
