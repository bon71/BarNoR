# MVP リリースタスク一覧

**作成日**: 2025-11-05
**優先度**: P1（最高優先度）
**目標**: MVPとして最低限動作するアプリをリリース

---

## 📊 現在の状況サマリー

### ✅ 完了済み機能（約70%）

- バーコードスキャン機能（Vision Camera + Code Scanner）
- 書籍情報取得（OpenBD API）
- Notion API連携（認証・DB操作・ページ作成）
- パッケージ管理UI（一覧・作成・プロパティマッピング）
- デフォルト書籍登録パッケージ
- スキャン履歴管理・表示
- エラーハンドリング（3層防御戦略）
- 4タブナビゲーション（ホーム/履歴/パッケージ/設定）
- 227件のテスト実装・成功

### ⚠️ 未完了・未検証（約30%）

- **実機テスト未実施**（カメラ・Notion API・フロー全体）
- パッケージ編集機能（UI存在、更新処理未実装）
- オフライン対応（ネットワークエラー時のキューイング）
- 商品情報取得（楽天API - 定数のみ、実装なし）
- In-App Purchase（Post-MVP）

---

## 🎯 MVP定義（Minimum Viable Product）

### MVP成功基準

MVPとして以下が動作すれば「リリース可能」と判断：

1. ✅ **バーコードスキャン → 書籍情報取得 → Notion保存** の基本フローが実機で動作
2. ✅ デフォルト書籍登録パッケージで最低1冊の本が登録できる
3. ✅ クラッシュなく起動・操作できる
4. ✅ Notion認証・トークン保存が機能する
5. ✅ スキャン履歴が正しく表示される

### MVP除外機能（Post-MVP）

以下は **MVP後のアップデート** で実装：

- 商品情報取得（楽天API）
- In-App Purchase（サブスクリプション）
- オフライン対応とバックグラウンド送信
- カスタムパッケージの編集機能
- 高度なエラーリカバリー

---

## 📋 残りタスク（優先度順）

### 🔴 Phase 1: Critical（必須 - 1-2日）

#### 1.1 実機テスト環境セットアップ

- [ ] Xcodeで署名設定（Bundle ID変更・Team設定）
- [ ] iPhoneをMacに接続・信頼設定
- [ ] CocoaPods依存関係の再インストール（`bundle exec pod install`）
- [ ] 実機ビルド実行（`npm run ios -- --device`）
- [ ] カメラ権限の動作確認

**成果物**: 実機でアプリが起動する状態

---

#### 1.2 実機での基本フロー動作確認

- [ ] Notion Integration Token入力・認証
- [ ] デフォルトパッケージ（書籍登録）がアクティブになっているか確認
- [ ] バーコードスキャン実行（実際の書籍ISBNをスキャン）
- [ ] OpenBD APIから書籍情報取得を確認
- [ ] 書籍情報がNotionデータベースに正しく保存されるか確認
- [ ] スキャン履歴に追加されるか確認

**成果物**: エンドツーエンドフローの実機動作確認完了

---

#### 1.3 Critical Bugfix（もしあれば）

実機テスト中に発見された **クラッシュ・致命的エラー** を修正

- [ ] カメラ起動エラー
- [ ] Notion API エラー（認証・保存失敗）
- [ ] アプリクラッシュ
- [ ] ナビゲーションエラー

**成果物**: Critical Bugの全修正

---

### 🟡 Phase 2: Important（重要 - 2-3日）

#### 2.1 パッケージ編集機能の完全実装

**現状**: PackageFormScreenに編集モードUIは存在するが、更新処理が未実装

- [ ] `PackageViewModel.updatePackage()` メソッド実装
- [ ] 編集画面からの保存処理実装
- [ ] 編集後のストレージ更新とストア同期
- [ ] 編集機能のテスト追加
- [ ] 実機での編集動作確認

**成果物**: パッケージ編集機能の完全動作

---

#### 2.2 エラーハンドリング強化

- [ ] Notion API エラー時のユーザーフレンドリーなメッセージ
- [ ] OpenBD API タイムアウト時の再試行機構
- [ ] ネットワークエラー時のフォールバック
- [ ] スキャン失敗時の適切なフィードバック
- [ ] エラーログの記録（開発環境）

**成果物**: エラーハンドリングの堅牢化

---

#### 2.3 UI/UX改善

- [ ] ローディング状態の視覚的フィードバック改善
- [ ] スキャン成功時のフィードバック（バイブレーション・音）
- [ ] エラー表示の改善（Toast表示の統一）
- [ ] 空状態（履歴なし・パッケージなし）のデザイン改善
- [ ] アクティブパッケージの強調表示確認

**成果物**: UX改善完了

---

### 🔵 Phase 3: Polish（仕上げ - 1-2日）

#### 3.1 最終コード品質チェック

- [ ] TypeScript型チェック（`npx tsc --noEmit`）
- [ ] ESLintエラー0件（`npx eslint src/`）
- [ ] テスト全件成功（`npm test`）
- [ ] 未使用importの削除
- [ ] console.logの削除（本番環境）

**成果物**: コード品質100%

---

#### 3.2 ドキュメント整備

- [ ] README.md 更新（セットアップ手順・使い方）
- [ ] リリースノート作成（CHANGELOG.md）
- [ ] ユーザー向け使い方ドキュメント
- [ ] 既知の問題・制限事項のドキュメント化

**成果物**: ドキュメント完成

---

#### 3.3 TestFlightビルド作成

- [ ] App Store Connect設定
- [ ] Archive作成（Xcode）
- [ ] TestFlightアップロード
- [ ] 内部テスター招待（最低3名）
- [ ] 1週間のベータテスト実施

**成果物**: TestFlightビルド公開

---

### 🟢 Phase 4: Post-MVP（リリース後 - 1-2週間）

#### 4.1 オフライン対応

- [ ] ネットワーク状態の監視
- [ ] オフライン時のスキャンデータキューイング
- [ ] オンライン復帰時の自動送信
- [ ] 未送信データの視覚的表示

---

#### 4.2 商品情報取得（楽天API）

- [ ] 楽天API DataSource実装
- [ ] ProductInfoパッケージタイプ実装
- [ ] 商品情報エンティティ追加
- [ ] 商品情報→Notion保存フロー実装

---

#### 4.3 In-App Purchase

- [ ] RevenueCat SDK統合
- [ ] 無料プラン（2パッケージ制限）実装
- [ ] 有料プラン（10パッケージ）実装
- [ ] 購入フロー実装
- [ ] リストア機能実装

---

## 📅 推奨スケジュール

| フェーズ | 期間 | 主要タスク |
|---------|------|-----------|
| Phase 1: Critical | 1-2日 | 実機テスト・基本フロー確認・Critical Bugfix |
| Phase 2: Important | 2-3日 | パッケージ編集・エラーハンドリング・UI改善 |
| Phase 3: Polish | 1-2日 | コード品質・ドキュメント・TestFlight |
| **MVP リリース** | **4-7日後** | **TestFlight公開** |
| Phase 4: Post-MVP | 1-2週間 | オフライン・楽天API・IAP |

---

## ✅ Definition of Done（MVP）

以下をすべて満たしたらMVP完成：

- [x] 実装済み: バーコードスキャン機能
- [x] 実装済み: 書籍情報取得（OpenBD API）
- [x] 実装済み: Notion API連携
- [x] 実装済み: パッケージ管理（作成・アクティブ化・削除）
- [ ] **実機テスト完了**（カメラ・API・フロー全体）
- [ ] **パッケージ編集機能実装**
- [ ] **Critical Bug 0件**
- [ ] **TypeScript/ESLint エラー 0件**
- [ ] **テスト全件成功**
- [ ] **ドキュメント完備**
- [ ] **TestFlightビルド公開**
- [ ] **3名以上の内部テスター検証完了**

---

## 🚨 注意事項

### 技術的制約

- **iOS のみ対応**（Android未対応）
- **iOS 13.4以降**（Deployment Target）
- **カメラ権限必須**（スキャン機能）
- **ネットワーク必須**（現状オフライン非対応）

### セキュリティ

- Notion Integration Token は暗号化してMMKVに保存済み
- .envファイルは .gitignore に追加済み
- APIキーはコードに直接埋め込まない

### パフォーマンス目標

- アプリ起動: 3秒以内（コールド）
- スキャン→結果表示: 2秒以内
- Notion保存: 5秒以内

---

## 📞 次のアクション

**最優先タスク（今すぐ開始）:**

1. **実機テスト環境セットアップ** → `docs/ios-device-testing-setup.md` 参照
2. **実機での基本フロー動作確認**
3. **発見されたバグの修正**

**質問・相談事項:**

- Notion Integration Tokenは取得済みか？
- テスト用のNotionデータベース（Library DB）は作成済みか？
- iOS実機（iPhone/iPad）は準備できているか？
- Apple Developer Accountは登録済みか？（TestFlight用）

---

**このPRPを完了したら `docs/product/done/` に移動してください。**
