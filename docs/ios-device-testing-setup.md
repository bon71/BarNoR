# iOSå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€NotionBarcodeReaderã‚¢ãƒ—ãƒªã‚’Macã‹ã‚‰iOSå®Ÿæ©Ÿã§ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ”§ å‰ææ¡ä»¶

### å¿…é ˆ
- âœ… Macï¼ˆmacOS 13.0ä»¥é™æ¨å¥¨ï¼‰
- âœ… Xcodeï¼ˆæœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¨å¥¨ï¼‰
- âœ… iOSå®Ÿæ©Ÿï¼ˆiPhone/iPadã€iOS 13.0ä»¥é™ï¼‰
- âœ… Lightningã‚±ãƒ¼ãƒ–ãƒ«ï¼ˆiPhoneã¨Macã‚’æ¥ç¶šï¼‰

### æ¨å¥¨ï¼ˆæœ¬ç•ªé…å¸ƒæ™‚ã«å¿…è¦ï¼‰
- Apple Developer Accountï¼ˆå¹´é–“$99ï¼‰
  - ç„¡æ–™ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚‚é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã¯å¯èƒ½ï¼ˆ7æ—¥é–“ã®è¨¼æ˜æ›¸æœŸé™ï¼‰

---

## âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. Xcodeã®ç¢ºèªã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### XcodeãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```bash
xcode-select -p
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆï¼š
```bash
# App Storeã‹ã‚‰Xcodeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# ã¾ãŸã¯
xcode-select --install
```

#### Xcodeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
```bash
xcodebuild -version
```

#### Command Line Toolsã®è¨­å®šç¢ºèª
```bash
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
```

---

### 2. CocoaPodsä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd /Users/bon/dev/NotionBarcodeReader/ios
pod install
```

**æ³¨æ„**: NitroModulesã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯å¾Œè¿°ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

### 3. iPhoneã®æ¥ç¶šã¨ä¿¡é ¼è¨­å®š

#### 3.1 iPhoneã‚’Macã«æ¥ç¶š
1. Lightningã‚±ãƒ¼ãƒ–ãƒ«ã§iPhoneã¨Macã‚’æ¥ç¶š
2. iPhoneå´ã§ã€Œã“ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’ä¿¡é ¼ã—ã¾ã™ã‹ï¼Ÿã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯ã€Œä¿¡é ¼ã€ã‚’ã‚¿ãƒƒãƒ—
3. Macå´ã§ã€Œä¿¡é ¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 3.2 ãƒ‡ãƒã‚¤ã‚¹ãŒèªè­˜ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```bash
xcrun xctrace list devices
```

ã¾ãŸã¯ã€Xcodeã‚’é–‹ã„ã¦ `Window > Devices and Simulators` ã§ç¢ºèª

---

### 4. Xcodeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š

#### 4.1 Xcodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
```bash
cd /Users/bon/dev/NotionBarcodeReader
open ios/NotionBarcodeReader.xcworkspace
```

**é‡è¦**: `NotionBarcodeReader.xcworkspace` ã‚’é–‹ãã“ã¨ï¼ˆ`.xcodeproj`ã§ã¯ãªã„ï¼‰

#### 4.2 Signing & Capabilitiesã®è¨­å®š

1. Xcodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ `NotionBarcodeReader` ã‚’é¸æŠ
2. `Signing & Capabilities` ã‚¿ãƒ–ã‚’é–‹ã
3. ä»¥ä¸‹ã‚’è¨­å®šï¼š

**Teamï¼ˆãƒãƒ¼ãƒ ï¼‰ã®è¨­å®š**
- ã€ŒTeamã€ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰è‡ªåˆ†ã®Apple IDã‚’é¸æŠ
- Apple IDãŒãªã„å ´åˆã¯ã€ŒAdd an Account...ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
  - å€‹äººç”¨Apple IDã§OKï¼ˆç„¡æ–™ï¼‰
  - Apple Developer Accountã‚’æŒã£ã¦ã„ã‚‹å ´åˆã¯ãã‚Œã‚’ä½¿ç”¨

**Bundle Identifierã®å¤‰æ›´**
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Bundle IDã¯ä»–ã®äººã¨ç«¶åˆã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚å¤‰æ›´
- ä¾‹: `com.yourname.NotionBarcodeReader`
- ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªè­˜åˆ¥å­ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**Automatically manage signingã«ãƒã‚§ãƒƒã‚¯**
- ã“ã‚Œã«ã‚ˆã‚Šè‡ªå‹•çš„ã«Provisioning ProfileãŒç”Ÿæˆã•ã‚Œã‚‹

#### 4.3 ãƒ‡ãƒãƒƒã‚°ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®é¸æŠ

Xcodeã®ä¸Šéƒ¨ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã§ï¼š
1. ã‚¹ã‚­ãƒ¼ãƒ ãŒ `NotionBarcodeReader` ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
2. ãƒ‡ãƒã‚¤ã‚¹é¸æŠã§æ¥ç¶šã—ãŸiPhoneã‚’é¸æŠï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã¯ãªãå®Ÿæ©Ÿï¼‰

---

### 5. ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ

#### 5.1 ãƒ“ãƒ«ãƒ‰å‰ã®ç¢ºèª
```bash
# Metroãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’èµ·å‹•
cd /Users/bon/dev/NotionBarcodeReader
npm start
```

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼š
```bash
# iOSã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œ
npm run ios -- --device
```

ã¾ãŸã¯ã€Xcodeã‹ã‚‰ç›´æ¥å®Ÿè¡Œï¼š
1. Xcodeã§ `Product > Run` ã¾ãŸã¯ `Cmd + R`
2. ãƒ“ãƒ«ãƒ‰ãŒé–‹å§‹ã•ã‚Œã€å®Œäº†å¾Œã«ã‚¢ãƒ—ãƒªãŒå®Ÿæ©Ÿã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹

#### 5.2 åˆå›å®Ÿè¡Œæ™‚ã®è¨­å®šï¼ˆé‡è¦ï¼‰

ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€åˆå›èµ·å‹•æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆï¼š

**iPhoneã§ã®è¨­å®šãŒå¿…è¦**
1. è¨­å®š > ä¸€èˆ¬ > VPNã¨ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ï¼ˆã¾ãŸã¯ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ï¼‰
2. ã€Œãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘Appã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è‡ªåˆ†ã®Apple IDã‚’é¸æŠ
3. ã€Œã€œã‚’ä¿¡é ¼ã€ã‚’ã‚¿ãƒƒãƒ—
4. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã€Œä¿¡é ¼ã€ã‚’ã‚¿ãƒƒãƒ—

ã“ã‚Œã§ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## ğŸ” é–‹ç™ºæ™‚ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ¨å¥¨ãƒ•ãƒ­ãƒ¼

1. **Metroãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’èµ·å‹•ã—ãŸã¾ã¾é–‹ç™º**
   ```bash
   npm start
   ```

2. **ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œã¯è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰**
   - Fast RefreshãŒæœ‰åŠ¹ãªãŸã‚ã€ä¿å­˜ã™ã‚‹ã¨è‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã‚‹
   - iPhoneå´ã§ã‚¢ãƒ—ãƒªãŒãƒªãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹

3. **æ‰‹å‹•ãƒªãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ãªå ´åˆ**
   - iPhoneã‚’æŒ¯ã‚‹ï¼ˆã‚·ã‚§ã‚¤ã‚¯ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ï¼‰
   - Developer MenuãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - ã€ŒReloadã€ã‚’é¸æŠ

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### React Native Debugger
```bash
# Chrome DevToolsã§ãƒ‡ãƒãƒƒã‚°
# Developer Menu > Debug
```

#### Xcodeã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«
- Xcodeã®ä¸‹éƒ¨ãƒ‘ãƒãƒ«ã«ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- `console.log()` ã®å‡ºåŠ›ã‚’ç¢ºèªå¯èƒ½

#### Safari Web Inspectorï¼ˆæ¨å¥¨ï¼‰
1. Safariã‚’é–‹ã
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ > é–‹ç™º > [ãƒ‡ãƒã‚¤ã‚¹å] > JSContext ã‚’é¸æŠ
3. JavaScriptã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒ‡ãƒãƒƒã‚°å¯èƒ½

---

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. NitroModules Podspec ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼å†…å®¹**:
```
[!] Unable to find a specification for `NitroModules` depended upon by `NitroMmkv`
```

**è§£æ±ºæ–¹æ³•**:

#### Option A: react-native-mmkvã‚’ä¸€æ™‚çš„ã«ã‚¹ã‚­ãƒƒãƒ—
```bash
cd ios
# Podfileã‚’ç·¨é›†ã—ã¦MMKVã‚’ä¸€æ™‚çš„ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
# ã¾ãŸã¯ã€ç¾çŠ¶ã®ã¾ã¾é€²ã‚ã‚‹ï¼ˆMMKVã¯å¾Œã§å®Ÿè£…ï¼‰
```

#### Option B: Podfileã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
cd ios
rm -rf Pods Podfile.lock
pod deintegrate
pod install
```

---

### 2. "Could not find iPhone" ã‚¨ãƒ©ãƒ¼

**åŸå› **: ãƒ‡ãƒã‚¤ã‚¹ãŒèªè­˜ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
1. iPhoneã‚’å†æ¥ç¶š
2. iPhoneã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤
3. ã€Œä¿¡é ¼ã€è¨­å®šã‚’å†ç¢ºèª
4. Xcodeã‚’å†èµ·å‹•
5. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ãƒã‚¤ã‚¹ãƒªã‚¹ãƒˆã‚’ç¢ºèªï¼š
   ```bash
   xcrun simctl list devices
   instruments -s devices
   ```

---

### 3. "Signing for 'NotionBarcodeReader' requires a development team" ã‚¨ãƒ©ãƒ¼

**åŸå› **: Teamï¼ˆé–‹ç™ºãƒãƒ¼ãƒ ï¼‰ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
1. Xcodeã§ `Signing & Capabilities` ã‚’é–‹ã
2. Teamé¸æŠã§è‡ªåˆ†ã®Apple IDã‚’é¸æŠ
3. Bundle Identifierã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚‚ã®ã«å¤‰æ›´
4. ã€ŒAutomatically manage signingã€ã«ãƒã‚§ãƒƒã‚¯

---

### 4. "Failed to register bundle identifier" ã‚¨ãƒ©ãƒ¼

**åŸå› **: Bundle IDãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
Bundle Identifierã‚’å¤‰æ›´ï¼š
```
ä¾‹: com.yourname.NotionBarcodeReader
ã¾ãŸã¯: com.yourdomain.notionbarcodereader
```

---

### 5. ç„¡æ–™Apple IDã®7æ—¥é–“åˆ¶é™

**åˆ¶é™äº‹é …**:
- ç„¡æ–™ã®Apple IDã§ç½²åã—ãŸã‚¢ãƒ—ãƒªã¯7æ—¥å¾Œã«æœŸé™åˆ‡ã‚Œã«ãªã‚‹
- å†åº¦ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦

**å›é¿æ–¹æ³•**:
- Apple Developer Programï¼ˆ$99/å¹´ï¼‰ã«ç™»éŒ²
- ã¾ãŸã¯ã€7æ—¥ã”ã¨ã«å†ãƒ“ãƒ«ãƒ‰

---

### 6. Metro Bundleræ¥ç¶šã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼**: "Unable to connect to Metro server"

**è§£æ±ºæ–¹æ³•**:
```bash
# Metroã‚’ãƒªã‚»ãƒƒãƒˆ
npm start -- --reset-cache

# ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ
lsof -ti:8081 | xargs kill -9
npm start
```

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆæº–å‚™å®Œäº†å¾Œ

1. **ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒŠãƒ¼çµ±åˆ**
   - React Native Vision Camera ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - ã‚«ãƒ¡ãƒ©æ¨©é™ã®è¨­å®š
   - MLKitã«ã‚ˆã‚‹ãƒãƒ¼ã‚³ãƒ¼ãƒ‰èªè­˜

2. **å®Ÿæ©Ÿã§ã®å‹•ä½œç¢ºèªé …ç›®**
   - [ ] ã‚¢ãƒ—ãƒªã®èµ·å‹•
   - [ ] ç”»é¢é·ç§»ï¼ˆãƒ›ãƒ¼ãƒ  â†’ è¨­å®šï¼‰
   - [ ] Notion Tokenå…¥åŠ›
   - [ ] ã‚«ãƒ¡ãƒ©èµ·å‹•ï¼ˆãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒŠãƒ¼çµ±åˆå¾Œï¼‰
   - [ ] ãƒãƒ¼ã‚³ãƒ¼ãƒ‰èªè­˜ï¼ˆãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒŠãƒ¼çµ±åˆå¾Œï¼‰
   - [ ] Notion APIé€£æº

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - ã‚¢ãƒ—ãƒªã®èµ·å‹•æ™‚é–“
   - ç”»é¢é·ç§»ã®ã‚¹ãƒ ãƒ¼ã‚ºã•
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

---

## ğŸ“ ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰é›†

### ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œ
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰ï¼ˆé–‹ç™ºç”¨ï¼‰
npm run ios -- --device

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ï¼ˆå‹•ä½œç¢ºèªç”¨ï¼‰
npm run ios -- --device --configuration Release

# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
cd ios
xcodebuild clean
cd ..
npm run ios -- --device
```

### ãƒ­ã‚°ç¢ºèª
```bash
# React Native ãƒ­ã‚°
npx react-native log-ios

# Xcodeãƒ­ã‚°
# Xcodeã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‚’ç¢ºèª
```

### ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
```bash
# æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§
xcrun xctrace list devices

# ãƒ‡ãƒã‚¤ã‚¹è©³ç´°
instruments -s devices
```

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [React Native - Running On Device](https://reactnative.dev/docs/running-on-device)
- [Xcode Documentation](https://developer.apple.com/documentation/xcode)
- [Apple Developer Program](https://developer.apple.com/programs/)
- [CocoaPods Guides](https://guides.cocoapods.org/)

---

**ä½œæˆæ—¥**: 2025-10-27
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: React Native 0.82.1, Xcode 15.x
